<%- include('header') -%>

<section class="registrations">

<ul>
  <% if(events) { %>
    <% for(let event of events ) { %>
      <li> <a href="<%= event.slug %>"> <%= event.namevidburdur %> </a> </li>
      <p> <%= event.description %> </p>
      <p> Ábyrgðarmaður á viðburði : <%= event.nameuser %> </p> 
      <br>
      <% } %>
    <% } else { %>
  <li> Engir viðburðir </li> 
  <% } %>
</ul>

<% if( validated && admin )  { %>
 <h1>Skrá nýjan viðburð</h1>
  <form class="form" method="post" action="/admin">
  
  <div class="field<%= locals.isInvalid('namevidburdur', errors) ?  ' field--invalid' : '' %>">
    <label for="namevidburdur">Nafn</label>
    <input type="text" name="namevidburdur" id="namevidburdur" value="<%= formData.namevidburdur %>" class="">
  </div>

  <div class="field field--textarea<%= locals.isInvalid('comment', errors) ?  ' field--invalid' : '' %>">
    <label for="comment">Lýsing</label>
    <textarea name="comment"></textarea>
  </div>

  <div class="villa">
   <% if (errors.length > 0) { %>
    <h2>Villur:</h2>
    <ul>
      <% errors.forEach((error) => { %>
        <li><label for="<%= error.param %>"><%= error.msg %></label></li>
      <% }); %>
    </ul>
  <% } %>
  </div>

  <button class="button button--small button--margin">Skrá viðburð</button>
</form>
<% } %>

<% if( !validated && !admin )  { %>
<hr>

<h1>Nýskráning</h1>
 <form class="form" method="post" action="/notandi/register" autocomplete="off">
  
  <div class="field<%= locals.isInvalid('nameskra', errors) ?  ' field--invalid' : '' %>">
    <label for="nameskra">Nafn</label>
    <input type="text" name="nameskra" id="nameskra">
  </div>

  <div class="field<%= locals.isInvalid('username', errors) ?  ' field--invalid' : '' %>">
    <label for="username">Notendanafn</label>
    <input type="text" name="username" id="username">
  </div>

  <div class="field<%= locals.isInvalid('password', errors) ?  ' field--invalid' : '' %>">
    <label for="password">Lykilorð</label>
    <input type="password" name="password" id="password">
  </div>

  <div class="villa">
    <% if (errors.length > 0) { %>
    <h2>Villur:</h2>
    <ul>
      <% errors.forEach((error) => { %>
        <li><label for="<%= error.param %>"><%= error.msg %></label></li>
      <% }); %>
    </ul>
  <% } %>
  </div>

 <button class="button button--margin">Nýskrá</button>

</form>
<% } %>
</section>
<%- include('footer') -%>
